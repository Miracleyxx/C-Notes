# 优雅的释放指针

**C语言时代：使用统一的宏来释放指针（没有类型检查，有危险）**

```C
// 删除指针  
	#define SAFE_DELETE(p) {  
    if (NULL != (p)) {   
        free((p));  
        (p) = NULL;  
    }
}
```

**C++时代：函数模板来操作释放指针，这样的好处是可以进行类型检查。**

```cpp
// 删除数组
template <typename T>
inline void safe_delete_ptr(T *&target) {
    if (nullptr != target) {
        delete target;
        target = nullptr;
    }
}

// 删除数组指针
template <typename T>
inline void safe_delete_arr_ptr(T *&target) {
    if (nullptr != target) {
        delete[] target;
        target = nullptr;
    }
}
```

